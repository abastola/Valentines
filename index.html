<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For Simran üíï</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cream: '#FFF8F0',
            ivory: '#FEFAF3',
            gold: {
              light: '#F5D78E',
              DEFAULT: '#D4A843',
              deep: '#B8860B',
              dark: '#8B6914',
            },
            crimson: {
              light: '#E8434A',
              DEFAULT: '#C41E3A',
              deep: '#8B0023',
              dark: '#5C0018',
            },
            blush: '#F4C2C2',
            rose: '#E8A0A0',
            warm: '#FFF0E6',
          },
          fontFamily: {
            display: ['"Playfair Display"', 'serif'],
            body: ['"Crimson Text"', 'serif'],
            script: ['"Dancing Script"', 'cursive'],
          },
        },
      },
    };
  </script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { overflow-x: hidden; background: #1a0008; }

    /* ===== FLOATING ELEMENTS ===== */
    @keyframes floatUp {
      0% { transform: translateY(100vh) rotate(0deg) scale(0); opacity: 0; }
      10% { opacity: 1; transform: translateY(90vh) rotate(20deg) scale(1); }
      90% { opacity: 0.8; }
      100% { transform: translateY(-10vh) rotate(360deg) scale(0.5); opacity: 0; }
    }
    @keyframes floatUpSlow {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      15% { opacity: 0.6; }
      85% { opacity: 0.4; }
      100% { transform: translateY(-10vh) rotate(180deg); opacity: 0; }
    }
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
      50% { opacity: 1; transform: scale(1) rotate(180deg); }
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(212, 168, 67, 0.3), 0 0 40px rgba(196, 30, 58, 0.2); }
      50% { box-shadow: 0 0 30px rgba(212, 168, 67, 0.5), 0 0 60px rgba(196, 30, 58, 0.3); }
    }
    @keyframes pulse-text {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    @keyframes breathe {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10% { transform: translateX(-8px) rotate(-1deg); }
      20% { transform: translateX(8px) rotate(1deg); }
      30% { transform: translateX(-6px) rotate(-0.5deg); }
      40% { transform: translateX(6px) rotate(0.5deg); }
      50% { transform: translateX(-4px); }
      60% { transform: translateX(4px); }
      70% { transform: translateX(-2px); }
      80% { transform: translateX(2px); }
      90% { transform: translateX(-1px); }
    }
    @keyframes envelope-open {
      0% { transform: rotateX(0deg); }
      100% { transform: rotateX(-180deg); }
    }
    @keyframes slide-up-letter {
      0% { transform: translateY(0); }
      100% { transform: translateY(-60px); }
    }
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    @keyframes scaleIn {
      0% { opacity: 0; transform: scale(0.5); }
      50% { transform: scale(1.1); }
      100% { opacity: 1; transform: scale(1); }
    }
    @keyframes bounceIn {
      0% { opacity: 0; transform: scale(0.3); }
      50% { transform: scale(1.05); }
      70% { transform: scale(0.95); }
      100% { opacity: 1; transform: scale(1); }
    }
    @keyframes confettiFall {
      0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(110vh) rotate(720deg); opacity: 0.5; }
    }
    @keyframes confettiDrift {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(15px); }
      75% { transform: translateX(-15px); }
    }
    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }
    @keyframes heartBeat {
      0%, 100% { transform: scale(1); }
      14% { transform: scale(1.15); }
      28% { transform: scale(1); }
      42% { transform: scale(1.15); }
      56% { transform: scale(1); }
    }
    @keyframes runaway {
      0% { transform: translate(0, 0); }
      100% { transform: translate(var(--tx), var(--ty)); }
    }
    @keyframes wiggle {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-5deg); }
      75% { transform: rotate(5deg); }
    }
    @keyframes growPulse {
      0%, 100% { transform: scale(var(--yes-scale, 1)); }
      50% { transform: scale(calc(var(--yes-scale, 1) * 1.05)); }
    }
    @keyframes slideInMemory {
      0% { opacity: 0; transform: translateY(20px) scale(0.95); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    @keyframes gentleBob {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-6px); }
    }
    @keyframes countdownPulse {
      0%, 100% { transform: scale(1); opacity: 0.9; }
      50% { transform: scale(1.05); opacity: 1; }
    }

    .screen-shake {
      animation: shake 0.5s ease-in-out;
    }

    .floating-heart {
      position: fixed;
      pointer-events: none;
      z-index: 0;
      animation: floatUp linear infinite;
    }
    .floating-sparkle {
      position: fixed;
      pointer-events: none;
      z-index: 0;
      animation: sparkle ease-in-out infinite;
    }

    .yes-btn-shimmer {
      background-size: 200% auto;
      animation: shimmer 3s linear infinite;
    }

    .memory-card {
      animation: slideInMemory 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    /* Noise texture overlay */
    .noise-overlay::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      opacity: 0.03;
      z-index: 1;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    }

    /* Radial gradient background */
    .romantic-bg {
      background: radial-gradient(ellipse at 30% 20%, rgba(139, 0, 35, 0.4) 0%, transparent 50%),
                  radial-gradient(ellipse at 70% 80%, rgba(184, 134, 11, 0.15) 0%, transparent 50%),
                  radial-gradient(ellipse at 50% 50%, rgba(92, 0, 24, 0.6) 0%, transparent 70%),
                  linear-gradient(180deg, #1a0008 0%, #2a0010 30%, #1a0008 100%);
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: rgba(26, 0, 8, 0.5); }
    ::-webkit-scrollbar-thumb { background: rgba(196, 30, 58, 0.3); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(196, 30, 58, 0.5); }
  </style>
</head>
<body class="noise-overlay">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback, useMemo } = React;

    // ===== CONSTANTS =====
    const WEDDING_DATE = new Date('2026-02-20T00:00:00');

    const NO_MEMORIES = [
      {
        text: "Really? You're saying no to the guy who's taken you from San Francisco to wine country to Nepal and back? We've literally traveled the world together and you're clicking NO? üåç‚úàÔ∏è",
        nextBtn: "Are you sure?"
      },
      {
        text: "The man who DESTROYS you in Just Dance every single night and still lets you pick the next song‚Ä¶ and THIS is how you repay me? üï∫üíÉ",
        nextBtn: "Really sure?"
      },
      {
        text: "I stare at you every single night while you sleep because I still can't believe you're real. That's not creepy, that's LOVE. Say yes. ü•∫üåô",
        nextBtn: "Super sure?"
      },
      {
        text: "We're about to be matching New Balance couple üëüüëü You really want to throw away coordinated sneaker game like that? Think about the Instagram photos, Simran.",
        nextBtn: "Final answer?"
      },
      {
        text: "I literally booked us an overwater villa in the Maldives for our honeymoon üèùÔ∏è You're about to wake up above the ocean with me and you're STILL saying no?!",
        nextBtn: "No ‚ùå"
      },
    ];

    const CONFETTI_COLORS = [
      '#C41E3A', '#D4A843', '#F5D78E', '#E8434A', '#F4C2C2',
      '#B8860B', '#FF6B6B', '#FFD700', '#FF9999', '#FFDAB9',
      '#E8A0A0', '#FF4444', '#FFA500', '#FFE4B5', '#DC143C'
    ];

    // ===== FLOATING ELEMENTS COMPONENT =====
    function FloatingElements({ intensity = 1 }) {
      const elements = useMemo(() => {
        const hearts = [];
        const sparkles = [];
        const count = Math.floor(18 * intensity);
        for (let i = 0; i < count; i++) {
          hearts.push({
            id: `h-${i}`,
            left: `${Math.random() * 100}%`,
            size: 12 + Math.random() * 20,
            duration: 8 + Math.random() * 12,
            delay: Math.random() * 15,
            opacity: 0.15 + Math.random() * 0.25,
            color: ['#D4A843', '#F5D78E', '#C41E3A', '#E8434A', '#B8860B', '#F4C2C2'][Math.floor(Math.random() * 6)],
          });
        }
        for (let i = 0; i < Math.floor(12 * intensity); i++) {
          sparkles.push({
            id: `s-${i}`,
            left: `${Math.random() * 100}%`,
            top: `${Math.random() * 100}%`,
            size: 3 + Math.random() * 5,
            duration: 2 + Math.random() * 4,
            delay: Math.random() * 6,
          });
        }
        return { hearts, sparkles };
      }, [intensity]);

      return (
        <>
          {elements.hearts.map(h => (
            <div
              key={h.id}
              className="floating-heart"
              style={{
                left: h.left,
                animationDuration: `${h.duration}s`,
                animationDelay: `${h.delay}s`,
                opacity: h.opacity,
                color: h.color,
                fontSize: `${h.size}px`,
              }}
            >
              ‚ô•
            </div>
          ))}
          {elements.sparkles.map(s => (
            <div
              key={s.id}
              className="floating-sparkle"
              style={{
                left: s.left,
                top: s.top,
                animationDuration: `${s.duration}s`,
                animationDelay: `${s.delay}s`,
                width: `${s.size}px`,
                height: `${s.size}px`,
                borderRadius: '50%',
                background: 'radial-gradient(circle, rgba(245,215,142,0.9) 0%, transparent 70%)',
              }}
            />
          ))}
        </>
      );
    }

    // ===== CONFETTI COMPONENT =====
    function Confetti() {
      const pieces = useMemo(() => {
        return Array.from({ length: 120 }, (_, i) => ({
          id: i,
          left: `${Math.random() * 100}%`,
          color: CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)],
          size: 6 + Math.random() * 10,
          duration: 2.5 + Math.random() * 3,
          delay: Math.random() * 2.5,
          drift: -30 + Math.random() * 60,
          rotation: Math.random() * 720,
          shape: Math.random() > 0.5 ? 'circle' : 'rect',
        }));
      }, []);

      return (
        <div className="fixed inset-0 pointer-events-none z-50 overflow-hidden">
          {pieces.map(p => (
            <div
              key={p.id}
              style={{
                position: 'absolute',
                left: p.left,
                top: '-2%',
                width: p.shape === 'circle' ? `${p.size}px` : `${p.size * 0.6}px`,
                height: `${p.size}px`,
                background: p.color,
                borderRadius: p.shape === 'circle' ? '50%' : '2px',
                animation: `confettiFall ${p.duration}s ${p.delay}s linear infinite`,
                transform: `translateX(${p.drift}px)`,
                opacity: 0.9,
              }}
            />
          ))}
        </div>
      );
    }

    // ===== CELEBRATION HEARTS =====
    function CelebrationHearts() {
      const hearts = useMemo(() => {
        return Array.from({ length: 30 }, (_, i) => ({
          id: i,
          left: `${Math.random() * 100}%`,
          size: 16 + Math.random() * 28,
          duration: 4 + Math.random() * 6,
          delay: Math.random() * 5,
          color: CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)],
        }));
      }, []);

      return (
        <>
          {hearts.map(h => (
            <div
              key={h.id}
              className="floating-heart"
              style={{
                left: h.left,
                fontSize: `${h.size}px`,
                animationDuration: `${h.duration}s`,
                animationDelay: `${h.delay}s`,
                color: h.color,
                opacity: 0.7,
              }}
            >
              ‚ô•
            </div>
          ))}
        </>
      );
    }

    // ===== COUNTDOWN COMPONENT =====
    function Countdown() {
      const [now, setNow] = useState(new Date());
      useEffect(() => {
        const t = setInterval(() => setNow(new Date()), 1000);
        return () => clearInterval(t);
      }, []);

      const diff = WEDDING_DATE - now;
      const days = Math.max(0, Math.floor(diff / (1000 * 60 * 60 * 24)));
      const hours = Math.max(0, Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));
      const minutes = Math.max(0, Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)));
      const seconds = Math.max(0, Math.floor((diff % (1000 * 60)) / 1000));

      return (
        <div className="flex items-center justify-center gap-3 sm:gap-5 mt-8" style={{ animation: 'countdownPulse 3s ease-in-out infinite' }}>
          {[
            { val: days, label: 'Days' },
            { val: hours, label: 'Hours' },
            { val: minutes, label: 'Min' },
            { val: seconds, label: 'Sec' },
          ].map((item, i) => (
            <div key={i} className="flex flex-col items-center">
              <div
                className="font-display text-3xl sm:text-4xl font-bold"
                style={{
                  color: '#F5D78E',
                  textShadow: '0 0 20px rgba(212,168,67,0.4)',
                  minWidth: '60px',
                  textAlign: 'center',
                }}
              >
                {String(item.val).padStart(2, '0')}
              </div>
              <div className="font-body text-xs sm:text-sm mt-1" style={{ color: '#E8A0A0' }}>
                {item.label}
              </div>
            </div>
          ))}
        </div>
      );
    }

    // ===== ENVELOPE COMPONENT =====
    function Envelope({ onOpen }) {
      const [opening, setOpening] = useState(false);
      const [opened, setOpened] = useState(false);

      const handleClick = () => {
        if (opening) return;
        setOpening(true);
        setTimeout(() => setOpened(true), 800);
        setTimeout(() => onOpen(), 1600);
      };

      return (
        <div
          className="cursor-pointer relative mx-auto"
          onClick={handleClick}
          style={{
            width: 'min(320px, 80vw)',
            height: 'min(220px, 55vw)',
            perspective: '800px',
          }}
        >
          {/* Envelope body */}
          <div
            className="absolute inset-0 rounded-lg"
            style={{
              background: 'linear-gradient(135deg, #C41E3A 0%, #8B0023 100%)',
              boxShadow: '0 10px 40px rgba(196,30,58,0.4), 0 0 60px rgba(196,30,58,0.1)',
              border: '1px solid rgba(245,215,142,0.2)',
            }}
          />

          {/* Inner shadow / letter peek */}
          <div
            className="absolute rounded"
            style={{
              top: '15%', left: '8%', right: '8%', bottom: '10%',
              background: opened ? 'transparent' : 'linear-gradient(180deg, #FFF8F0 0%, #FEFAF3 100%)',
              transition: 'transform 0.8s ease-out, opacity 0.3s',
              transform: opened ? 'translateY(-70px)' : 'translateY(0)',
              opacity: opened ? 0 : 1,
              boxShadow: '0 2px 10px rgba(0,0,0,0.1)',
            }}
          >
            <div className="p-4 text-center" style={{ color: '#5C0018' }}>
              <div className="font-script text-lg sm:text-xl mb-1" style={{ color: '#C41E3A' }}>For Simran</div>
              <div className="font-body text-xs" style={{ color: '#8B0023', opacity: 0.6 }}>with all my love</div>
              <div className="mt-3" style={{ fontSize: '24px' }}>üíå</div>
            </div>
          </div>

          {/* Flap */}
          <div
            style={{
              position: 'absolute',
              top: 0, left: 0, right: 0,
              height: '50%',
              transformOrigin: 'top center',
              transform: opening ? 'rotateX(-180deg)' : 'rotateX(0deg)',
              transition: 'transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)',
              zIndex: opening ? 0 : 2,
            }}
          >
            <div
              className="w-full h-full"
              style={{
                background: 'linear-gradient(180deg, #C41E3A 0%, #A01830 100%)',
                clipPath: 'polygon(0 0, 50% 100%, 100% 0)',
                borderRadius: '8px 8px 0 0',
                border: '1px solid rgba(245,215,142,0.15)',
              }}
            />
          </div>

          {/* Seal */}
          {!opening && (
            <div
              className="absolute z-10"
              style={{
                top: '50%', left: '50%',
                transform: 'translate(-50%, -50%)',
                width: '48px', height: '48px',
                borderRadius: '50%',
                background: 'radial-gradient(circle, #F5D78E 0%, #D4A843 60%, #B8860B 100%)',
                boxShadow: '0 2px 10px rgba(184,134,11,0.5)',
                display: 'flex', alignItems: 'center', justifyContent: 'center',
                fontSize: '20px',
                animation: 'breathe 2s ease-in-out infinite',
              }}
            >
              ‚ô•
            </div>
          )}
        </div>
      );
    }

    // ===== MAIN APP =====
    function App() {
      const [screen, setScreen] = useState('opening'); // opening, question, yes
      const [noCount, setNoCount] = useState(0);
      const [currentMemory, setCurrentMemory] = useState(null);
      const [memoryKey, setMemoryKey] = useState(0);
      const [shaking, setShaking] = useState(false);
      const [envelopeOpened, setEnvelopeOpened] = useState(false);
      const [showText, setShowText] = useState(false);
      const [showButton, setShowButton] = useState(false);
      const [questionVisible, setQuestionVisible] = useState(false);
      const [yesVisible, setYesVisible] = useState(false);
      const [yesMessage, setYesMessage] = useState(0); // 0 = I KNEW IT, 1 = full message
      const [noBtnPos, setNoBtnPos] = useState(null);
      const noBtnRef = useRef(null);
      const containerRef = useRef(null);
      const lastDodgeTime = useRef(0);

      // Opening screen sequencing
      useEffect(() => {
        if (screen === 'opening') {
          const t1 = setTimeout(() => setShowText(true), 800);
          const t2 = setTimeout(() => setShowButton(true), 1800);
          return () => { clearTimeout(t1); clearTimeout(t2); };
        }
      }, [screen]);

      // Question screen animation
      useEffect(() => {
        if (screen === 'question') {
          const t = setTimeout(() => setQuestionVisible(true), 300);
          return () => clearTimeout(t);
        }
      }, [screen]);

      // Yes screen sequencing
      useEffect(() => {
        if (screen === 'yes') {
          setYesVisible(true);
          const t = setTimeout(() => setYesMessage(1), 3500);
          return () => clearTimeout(t);
        }
      }, [screen]);

      const handleNo = useCallback(() => {
        if (noCount >= 5) return; // after 5, button runs away

        // Screen shake
        setShaking(true);
        setTimeout(() => setShaking(false), 500);

        const newCount = noCount + 1;
        setNoCount(newCount);

        if (newCount <= 5) {
          setCurrentMemory(NO_MEMORIES[newCount - 1]);
          setMemoryKey(prev => prev + 1);
        }
      }, [noCount]);

      const handleYes = useCallback(() => {
        setScreen('yes');
      }, []);

      // Runaway button logic (desktop)
      const handleNoMouseEnter = useCallback((e) => {
        if (noCount < 5) return;
        const now = Date.now();
        if (now - lastDodgeTime.current < 100) return;
        lastDodgeTime.current = now;

        const container = containerRef.current;
        if (!container) return;
        const rect = container.getBoundingClientRect();
        const btnW = 140, btnH = 48;
        const maxX = rect.width - btnW - 20;
        const maxY = rect.height - btnH - 20;
        const newX = 20 + Math.random() * maxX;
        const newY = 20 + Math.random() * maxY;
        setNoBtnPos({ x: newX, y: newY });
      }, [noCount]);

      // Runaway button logic (mobile)
      const handleNoTouchStart = useCallback((e) => {
        if (noCount < 5) return;
        e.preventDefault();
        const container = containerRef.current;
        if (!container) return;
        const rect = container.getBoundingClientRect();
        const btnW = 140, btnH = 48;
        const maxX = rect.width - btnW - 20;
        const maxY = rect.height - btnH - 20;
        const newX = 20 + Math.random() * maxX;
        const newY = 20 + Math.random() * maxY;
        setNoBtnPos({ x: newX, y: newY });
      }, [noCount]);

      const noButtonText = noCount === 0 ? 'No' :
        noCount <= 5 ? NO_MEMORIES[noCount - 1].nextBtn :
        'No ‚ùå';

      const yesScale = 1 + noCount * 0.08;
      const yesGlowIntensity = 20 + noCount * 8;

      // ===== OPENING SCREEN =====
      if (screen === 'opening') {
        return (
          <div className="romantic-bg min-h-screen flex flex-col items-center justify-center px-6 relative overflow-hidden">
            <FloatingElements intensity={0.7} />
            <div className="relative z-10 flex flex-col items-center">
              {!envelopeOpened && (
                <div style={{ animation: 'fadeIn 1s ease-out' }}>
                  <Envelope onOpen={() => {
                    setEnvelopeOpened(true);
                  }} />
                  <p
                    className="font-body text-sm mt-6 text-center"
                    style={{
                      color: '#E8A0A0',
                      animation: 'breathe 2s ease-in-out infinite',
                      opacity: 0.8,
                    }}
                  >
                    tap to open
                  </p>
                </div>
              )}

              {envelopeOpened && (
                <div className="text-center" style={{ animation: 'fadeInUp 0.8s ease-out' }}>
                  <p
                    className="font-script text-4xl sm:text-5xl mb-4"
                    style={{
                      color: '#F5D78E',
                      textShadow: '0 0 30px rgba(245,215,142,0.3)',
                      animation: showText ? 'fadeInUp 0.8s ease-out' : 'none',
                      opacity: showText ? 1 : 0,
                    }}
                  >
                    Hey Simran‚Ä¶
                  </p>
                  {showText && (
                    <p
                      className="font-body text-xl sm:text-2xl mb-10"
                      style={{
                        color: '#F4C2C2',
                        maxWidth: '400px',
                        lineHeight: 1.6,
                        animation: 'fadeInUp 0.8s 0.3s ease-out both',
                      }}
                    >
                      I have a very important question for you üíï
                    </p>
                  )}
                  {showButton && (
                    <button
                      onClick={() => setScreen('question')}
                      className="font-display text-lg sm:text-xl px-10 py-4 rounded-full transition-all duration-300 hover:scale-105 active:scale-95"
                      style={{
                        background: 'linear-gradient(135deg, #C41E3A 0%, #8B0023 100%)',
                        color: '#FFF8F0',
                        border: '1px solid rgba(245,215,142,0.3)',
                        boxShadow: '0 0 30px rgba(196,30,58,0.4), 0 4px 20px rgba(0,0,0,0.3)',
                        animation: 'fadeInUp 0.6s ease-out, pulse-glow 2s ease-in-out infinite',
                        letterSpacing: '0.05em',
                      }}
                    >
                      Continue
                    </button>
                  )}
                </div>
              )}
            </div>
          </div>
        );
      }

      // ===== YES SCREEN =====
      if (screen === 'yes') {
        return (
          <div className="romantic-bg min-h-screen flex flex-col items-center justify-center px-6 relative overflow-hidden">
            <FloatingElements intensity={1.5} />
            <CelebrationHearts />
            <Confetti />

            <div className="relative z-10 text-center max-w-lg mx-auto">
              {yesMessage === 0 ? (
                <div style={{ animation: 'bounceIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)' }}>
                  <div
                    className="font-display text-6xl sm:text-7xl font-bold mb-4"
                    style={{
                      color: '#F5D78E',
                      textShadow: '0 0 40px rgba(245,215,142,0.5), 0 0 80px rgba(196,30,58,0.3)',
                      animation: 'heartBeat 1.5s ease-in-out infinite',
                    }}
                  >
                    I KNEW IT!
                  </div>
                  <div className="text-5xl" style={{ animation: 'bounceIn 0.8s 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) both' }}>
                    ü•∞
                  </div>
                </div>
              ) : (
                <div style={{ animation: 'fadeInUp 1s ease-out' }}>
                  <p
                    className="font-script text-4xl sm:text-5xl mb-8"
                    style={{
                      color: '#F5D78E',
                      textShadow: '0 0 30px rgba(245,215,142,0.3)',
                    }}
                  >
                    Happy Valentine's Day, my love üíï
                  </p>

                  <div
                    className="font-body text-lg sm:text-xl leading-relaxed space-y-5"
                    style={{ color: '#F4C2C2' }}
                  >
                    <p style={{ animation: 'fadeInUp 0.8s 0.2s ease-out both' }}>
                      From our adventures across the world, to our Just Dance battles at midnight, to me watching you sleep like the creep that I am‚Ä¶
                    </p>
                    <p style={{ animation: 'fadeInUp 0.8s 0.5s ease-out both', color: '#FFF8F0' }}>
                      Every moment with you is my favorite moment.
                    </p>
                  </div>

                  <div
                    className="mt-10 pt-8"
                    style={{
                      borderTop: '1px solid rgba(245,215,142,0.15)',
                      animation: 'fadeInUp 0.8s 0.8s ease-out both',
                    }}
                  >
                    <div
                      className="font-display text-2xl sm:text-3xl font-bold mb-2"
                      style={{
                        color: '#F5D78E',
                        textShadow: '0 0 20px rgba(245,215,142,0.3)',
                      }}
                    >
                      üíç Marrying my best friend in
                    </div>
                    <Countdown />
                  </div>

                  <div
                    className="mt-8"
                    style={{ animation: 'fadeInUp 0.8s 1.2s ease-out both' }}
                  >
                    <p className="font-body text-lg" style={{ color: '#E8A0A0' }}>
                      See you at the altar ‚ú®
                    </p>
                    <p
                      className="font-display text-sm mt-3 tracking-widest uppercase"
                      style={{ color: 'rgba(245,215,142,0.5)' }}
                    >
                      February 20, 2026 ¬∑ Kathmandu & Chitwan, Nepal
                    </p>
                  </div>
                </div>
              )}
            </div>
          </div>
        );
      }

      // ===== QUESTION SCREEN =====
      return (
        <div
          ref={containerRef}
          className={`romantic-bg min-h-screen flex flex-col items-center justify-center px-6 relative overflow-hidden ${shaking ? 'screen-shake' : ''}`}
        >
          <FloatingElements intensity={1 + noCount * 0.15} />

          <div className="relative z-10 text-center w-full max-w-xl mx-auto">
            {/* Main Question */}
            <div
              style={{
                opacity: questionVisible ? 1 : 0,
                transform: questionVisible ? 'translateY(0)' : 'translateY(30px)',
                transition: 'all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)',
              }}
            >
              <h1
                className="font-display text-4xl sm:text-5xl md:text-6xl font-bold leading-tight mb-3"
                style={{
                  color: '#FFF8F0',
                  textShadow: '0 0 40px rgba(245,215,142,0.2)',
                  animation: 'pulse-text 3s ease-in-out infinite',
                }}
              >
                Will You Be My{' '}
                <span style={{
                  color: '#F5D78E',
                  textShadow: '0 0 30px rgba(245,215,142,0.4)',
                }}>
                  Valentine?
                </span>
                {' '}üíù
              </h1>

              <p
                className="font-body text-base sm:text-lg mt-4 mb-10 max-w-md mx-auto"
                style={{
                  color: '#E8A0A0',
                  lineHeight: 1.7,
                  animation: 'fadeInUp 0.8s 0.4s ease-out both',
                }}
              >
                Choose wisely‚Ä¶ this is your <span style={{ color: '#F5D78E', fontWeight: 600 }}>LAST</span> year with a choice.
                After Feb 20, you're stuck with me forever üòè
              </p>
            </div>

            {/* Memory Display */}
            {currentMemory && (
              <div
                key={memoryKey}
                className="memory-card mb-8 mx-auto max-w-md p-5 sm:p-6 rounded-2xl"
                style={{
                  background: 'linear-gradient(135deg, rgba(196,30,58,0.15) 0%, rgba(184,134,11,0.1) 100%)',
                  border: '1px solid rgba(245,215,142,0.15)',
                  backdropFilter: 'blur(10px)',
                  boxShadow: '0 8px 32px rgba(0,0,0,0.3)',
                }}
              >
                <p
                  className="font-body text-base sm:text-lg italic"
                  style={{
                    color: '#F4C2C2',
                    lineHeight: 1.7,
                  }}
                >
                  {currentMemory.text}
                </p>
              </div>
            )}

            {/* Runaway message */}
            {noCount >= 5 && (
              <div
                className="mb-8 mx-auto max-w-md"
                style={{ animation: 'fadeInUp 0.6s ease-out' }}
              >
                <p
                  className="font-body text-lg"
                  style={{ color: '#F5D78E', lineHeight: 1.7 }}
                >
                  The No button has officially given up. It knows what's coming. Just say yes already‚Ä¶ üòèüíï
                </p>
              </div>
            )}

            {/* Buttons */}
            <div
              className="flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-6 relative"
              style={{
                minHeight: noCount >= 5 ? '200px' : 'auto',
                animation: 'fadeInUp 0.8s 0.6s ease-out both',
              }}
            >
              {/* YES Button */}
              <button
                onClick={handleYes}
                className="font-display text-lg sm:text-xl font-semibold px-8 sm:px-10 py-4 rounded-full transition-all duration-300 hover:scale-105 active:scale-95 yes-btn-shimmer relative overflow-hidden"
                style={{
                  background: `linear-gradient(90deg, #C41E3A, #D4A843, #C41E3A, #D4A843)`,
                  backgroundSize: '200% auto',
                  color: '#FFF8F0',
                  border: '2px solid rgba(245,215,142,0.4)',
                  boxShadow: `0 0 ${yesGlowIntensity}px rgba(196,30,58,0.5), 0 0 ${yesGlowIntensity * 1.5}px rgba(212,168,67,0.3), 0 4px 20px rgba(0,0,0,0.3)`,
                  transform: `scale(${yesScale})`,
                  animation: noCount >= 5
                    ? 'shimmer 2s linear infinite, growPulse 1.5s ease-in-out infinite'
                    : 'shimmer 3s linear infinite',
                  '--yes-scale': yesScale,
                  letterSpacing: '0.08em',
                  zIndex: 20,
                }}
              >
                Yes! üíï
              </button>

              {/* NO Button */}
              <button
                ref={noBtnRef}
                onClick={noCount < 5 ? handleNo : undefined}
                onMouseEnter={handleNoMouseEnter}
                onTouchStart={handleNoTouchStart}
                className="font-body transition-all duration-200"
                style={{
                  ...(noCount >= 5 && noBtnPos ? {
                    position: 'absolute',
                    left: `${noBtnPos.x}px`,
                    top: `${noBtnPos.y}px`,
                    transition: 'left 0.15s ease-out, top 0.15s ease-out',
                    animation: 'wiggle 0.3s ease-in-out infinite',
                    zIndex: 10,
                  } : {}),
                  padding: noCount >= 5 ? '8px 16px' : '10px 24px',
                  fontSize: noCount >= 5 ? '12px' : '14px',
                  color: noCount >= 5 ? 'rgba(232,160,160,0.4)' : 'rgba(232,160,160,0.6)',
                  background: 'transparent',
                  border: `1px solid ${noCount >= 5 ? 'rgba(232,160,160,0.15)' : 'rgba(232,160,160,0.2)'}`,
                  borderRadius: '9999px',
                  cursor: noCount >= 5 ? 'default' : 'pointer',
                  whiteSpace: 'nowrap',
                }}
              >
                {noButtonText}
              </button>
            </div>
          </div>
        </div>
      );
    }

    // ===== RENDER =====
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
